# yolov11
สรุปการใช้สคริปต์ตรวจจับวัตถุ YOLO
สคริปต์ Python นี้ออกแบบมาเพื่อทำการตรวจจับวัตถุแบบเรียลไทม์โดยใช้โมเดล YOLO (Ultralytics YOLO) และเน้นการนับ "ขวด" เป็นพิเศษ

วัตถุประสงค์หลัก:

ใช้โมเดล YOLO เพื่อตรวจจับวัตถุจากแหล่งที่มาของภาพหรือวิดีโอ

แสดงผลลัพธ์การตรวจจับพร้อม Bounding Box, ชื่อคลาส, และค่าความเชื่อมั่น

นับจำนวน "ขวด" ที่ตรวจจับได้และแสดงผลบนหน้าจอ

คำนวณและแสดงอัตราเฟรม (FPS) ของกระบวนการ

อนุญาตให้ผู้ใช้ควบคุมการแสดงผลและบันทึกภาพหน้าจอได้

บันทึกจำนวนขวดสุดท้ายลงในไฟล์ข้อความ (count.txt) เมื่อโปรแกรมสิ้นสุดการทำงาน

การทำงานโดยสรุป:

การตั้งค่า:

กำหนด Path ของไฟล์โมเดล YOLO (yolov8n.pt โดยค่าเริ่มต้น)

กำหนดค่า Confidence Threshold ขั้นต่ำ (0.5 โดยค่าเริ่มต้น)

กำหนดว่าจะบันทึกวิดีโอผลลัพธ์หรือไม่ (False โดยค่าเริ่มต้น)

ผู้ใช้สามารถระบุแหล่งที่มาของภาพได้จาก Command Line ซึ่งปัจจุบันจำกัดเฉพาะ กล้อง USB (usb0) หรือ Picamera (picamera0)

ผู้ใช้สามารถระบุความละเอียดในการแสดงผลได้

การโหลดโมเดลและแหล่งที่มา:

สคริปต์จะโหลดโมเดล YOLO ที่ระบุเข้าสู่หน่วยความจำ

เริ่มต้นการเชื่อมต่อกับแหล่งที่มาของภาพ/วิดีโอที่ผู้ใช้เลือก (เช่น กล้อง)

ลูปการอนุมาน (Inference Loop):

สคริปต์จะอ่านเฟรมภาพจากแหล่งที่มาอย่างต่อเนื่อง

แต่ละเฟรมจะถูกส่งผ่านโมเดล YOLO เพื่อตรวจจับวัตถุ

สำหรับวัตถุที่ตรวจจับได้และมี Confidence สูงกว่าเกณฑ์:

จะมีการวาด Bounding Box รอบวัตถุพร้อมชื่อคลาสและค่าความเชื่อมั่น

จะมีการตรวจสอบว่าวัตถุที่ตรวจจับได้เป็นคลาส 'bottle' หรือไม่ หากใช่ จะทำการนับเพิ่ม

แสดงผลลัพธ์บนหน้าต่าง OpenCV รวมถึงจำนวน "ขวด" ที่ตรวจจับได้ และค่า FPS

เก็บค่านับขวดล่าสุดไว้ในตัวแปร final_bottle_count ในแต่ละเฟรม

ผู้ใช้สามารถกดปุ่มเพื่อ:

q หรือ Q: ออกจากโปรแกรม

s หรือ S: หยุดการตรวจจับชั่วคราว

p หรือ P: บันทึกภาพหน้าจอของผลลัพธ์

การทำความสะอาดและบันทึกผลลัพธ์:

เมื่อโปรแกรมสิ้นสุด (โดยการกด 'q' หรือประมวลผลภาพทั้งหมดเสร็จสิ้น) สคริปต์จะปล่อยทรัพยากรที่ใช้ไป เช่น ปิดการเชื่อมต่อกล้องและปิดหน้าต่างแสดงผล

ค่า final_bottle_count ที่เป็นจำนวนขวดสุดท้ายที่นับได้จะถูกบันทึกลงในไฟล์ count.txt

วิธีการใช้งาน (ตัวอย่าง):

คุณจะต้องมีโมเดล YOLO (.pt file) และติดตั้งไลบรารีที่จำเป็น (OpenCV, NumPy, Ultralytics YOLO) จากนั้นสามารถรันสคริปต์จาก Command Line ได้ เช่น:

สำหรับกล้อง USB ตัวแรก: python your_script_name.py --source usb0

สำหรับ Picamera ตัวแรก: python your_script_name.py --source picamera0

สำหรับกล้อง USB ตัวแรกและกำหนดความละเอียด: python your_script_name.py --source usb0 --resolution 640x480

ข้อควรทราบ:

ชื่อคลาส 'bottle' ที่ใช้ในการนับขวดต้องตรงกับชื่อคลาสในไฟล์ model.names ของโมเดล YOLO ที่คุณใช้

คุณสามารถเปลี่ยน model_path, min_thresh และ record ได้โดยตรงในโค้ดหากต้องการกำหนดค่าตายตัวที่แตกต่างกัน

ไฟล์ count.txt จะถูกสร้างขึ้นในไดเรกทอรีเดียวกับที่คุณรันสคริปต์
